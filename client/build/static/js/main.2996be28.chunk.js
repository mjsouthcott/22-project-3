(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{273:function(e,a){},328:function(e,a,t){e.exports=t(548)},333:function(e,a,t){},366:function(e,a,t){},367:function(e,a,t){},368:function(e,a,t){},543:function(e,a,t){},544:function(e,a,t){},545:function(e,a,t){},546:function(e,a,t){},548:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(18),i=t.n(l),c=(t(333),t(13)),o=t(615),s=t(621),m=t(618),u=t(15),p=t.n(u),d={isLoggedIn:function(){return p.a.get("/api/login/")},login:function(e){return p.a.post("/api/login/".concat(e.username),e)},logout:function(){return p.a.get("/api/login/logout")},updateUserPassword:function(e){return p.a.patch("/api/login/password",e)},getUsers:function(){return p.a.get("/api/users")},getUser:function(e){return p.a.get("/api/users/".concat(e))},getOperators:function(){return p.a.get("/api/users?role=Operator")},getTechnicians:function(){return p.a.get("/api/users?role=Technician")},getDismountedOperators:function(){return p.a.get("/api/users?role=Operator&mounted=false")},getDismountedTechnicians:function(){return p.a.get("/api/users?role=Technician&mounted=false")},getAvailableTechnicians:function(){return p.a.get("/api/users?role=Technician&available=true")},updateUserDismountedStatus:function(e,a){return p.a.patch("/api/users/".concat(e),{mounted:a})},updateUserAvailableStatus:function(e,a){return p.a.patch("/api/users/".concat(e),{available:a})},saveUser:function(e){return p.a.post("/api/users",e)},getVehicles:function(){return p.a.get("/api/vehicles")},getVehicle:function(e){return p.a.get("/api/vehicles/".concat(e))},getOperatorVehicles:function(){return p.a.get("/api/vehicles?role=Operator")},getTechnicianVehicles:function(){return p.a.get("/api/vehicles?role=Technician")},getVehicleByOccupant:function(e){return p.a.get("/api/vehicles?assignedTo=".concat(e))},updateVehicleServiceableStatus:function(e,a){return p.a.patch("/api/vehicles/".concat(e),{serviceable:a})},updateVehicleOccupant:function(e,a){return p.a.patch("/api/vehicles/".concat(e),{occupant:a})},updateVehicleRepairRequests:function(e,a){return p.a.patch("/api/vehicles/".concat(e),{repairRequests:a})},saveVehicle:function(e){return p.a.post("/api/vehicles",e)},getRepairRequests:function(){return p.a.get("/api/repair-requests")},getRepairRequest:function(e){return p.a.get("/api/repair-requests/".concat(e))},getRepairRequestByTechnician:function(e){return p.a.get("/api/repair-requests?assignedTo=".concat(e))},updateRepairRequestStatus:function(e,a){return p.a.patch("/api/repair-requests/".concat(e),{status:a})},updateRepairRequestAssignedTo:function(e,a){return p.a.patch("/api/repair-requests/".concat(e),{assignedTo:a})},updateRepairRequestRepairWorkOrder:function(e,a){return p.a.patch("/api/repair-requests/".concat(e),{repairWorkOrder:a})},saveRepairRequest:function(e){return p.a.post("/api/repair-requests",e)},getRepairWorkOrders:function(){return p.a.get("/api/repair-work-orders")},saveRepairWorkOrder:function(e){return p.a.post("/api/repair-work-orders",e)}},g=t(76),h=t(585),E=t(586),f=t(587),b=t(610),v=t(589),y=t(611),w=t(584),O=t(613),N=t(8),k=t(169);function R(){return r.a.createElement(g.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ","eTripleR \xa0",(new Date).getFullYear(),".")}var C=Object(w.a)(function(e){return{paper:{marginTop:e.spacing(8),paddingTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}});function T(e){var a=C(),t=Object(n.useState)(""),l=Object(c.a)(t,2),i=l[0],o=l[1];return r.a.createElement(h.a,{component:"main",maxWidth:"xs"},r.a.createElement(E.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(g.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement(N.d,{initialValues:{username:"matthewsouthcott",password:"password"},onSubmit:function(a){var t={username:k.lower(a.username),password:a.password};d.login(t).then(function(a){e.handleLogin(a.data)}).catch(function(e){o("Credentials are incorrect")})}},function(e){e.errors,e.touched,e.values;return r.a.createElement(N.c,{className:a.form},r.a.createElement(f.a,{className:a.formGroup},r.a.createElement(N.b,{as:b.a,name:"username",label:"Username",variant:"outlined",margin:"normal",required:!0,fullWidth:!0,autoComplete:"username",autoFocus:!0})),r.a.createElement(f.a,null,r.a.createElement(N.b,{as:b.a,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"})),r.a.createElement(v.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign In"))}),r.a.createElement(O.a,{variant:"outlined",severity:"error",style:{opacity:i?1:0,width:"100%"},onClose:function(){return o("")}},i)),r.a.createElement(y.a,{mt:4},r.a.createElement(R,null)))}var S=t(99),M=t(153),q=t(295),x=r.a.createContext({_id:"",role:"",rank:"",firstName:"",lastName:"",occupation:"",available:!1,mounted:!1,username:""}),j=t(4),V=t(591),B=t(592),W=t(593),I=t(594),P=t(588),D=t(550),A=t(595),G=t(596),_=t(597),L=t(598),U=t(269),z=t.n(U),F=t(270),H=t.n(F),Y=t(271),$=t.n(Y),Z=Object(w.a)(function(e){return{root:{padding:e.spacing(2)},card:{padding:e.spacing(4)},items:{margin:e.spacing(2)},details:{display:"flex"},button:{marginLeft:e.spacing(1)}}});function K(e){var a=e.className,t=Object(q.a)(e,["className"]),l=Z(),i=Object(n.useContext)(x),o=Object(n.useState)({oldPassword:"",newPassword:"",confirm:""}),s=Object(c.a)(o,2),m=s[0],u=s[1],p=Object(n.useState)({message:"",severity:""}),h=Object(c.a)(p,2),E=h[0],f=h[1],y=function(e){u(Object(M.a)({},m,Object(S.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:l.root},r.a.createElement(V.a,{container:!0,spacing:6},r.a.createElement(V.a,{item:!0,xl:8,md:6,sm:12},r.a.createElement(B.a,Object.assign({},t,{className:Object(j.a)(l.card,a)}),r.a.createElement("form",{autoComplete:"off",noValidate:!0},r.a.createElement(W.a,null,r.a.createElement("div",{className:l.details},r.a.createElement("div",null,r.a.createElement(g.a,{gutterBottom:!0,variant:"h3"},i.firstName," ",i.lastName),r.a.createElement(g.a,{className:l.locationText,variant:"h5"},i.role)))),r.a.createElement(I.a,null),r.a.createElement(P.a,null,r.a.createElement(D.a,{className:l.items},r.a.createElement(A.a,null,r.a.createElement(z.a,null)),r.a.createElement(G.a,null,r.a.createElement("b",null,"Rank: ")," ",i.rank)),r.a.createElement(I.a,{variant:"inset",component:"li"}),r.a.createElement(D.a,{className:l.items},r.a.createElement(A.a,null,r.a.createElement(H.a,null)),r.a.createElement(G.a,null,r.a.createElement("b",null,"Occupation: ")," ",i.occupation)),r.a.createElement(I.a,{variant:"inset",component:"li"}),r.a.createElement(D.a,{className:l.items},r.a.createElement(A.a,null,r.a.createElement($.a,null)),r.a.createElement(G.a,null,r.a.createElement("b",null,"Tehicle Information: "))),r.a.createElement(I.a,{variant:"inset",component:"li"}))))),r.a.createElement(V.a,{item:!0,xl:4,md:6,sm:12},r.a.createElement(B.a,Object.assign({},t,{className:Object(j.a)(l.card,a)}),r.a.createElement("form",null,r.a.createElement(_.a,{subheader:"Update password",title:"Password"}),r.a.createElement(I.a,null),r.a.createElement(W.a,null,r.a.createElement(b.a,{fullWidth:!0,label:"Old Password",name:"oldPassword",onChange:y,value:m.oldPassword,variant:"outlined"}),r.a.createElement(b.a,{fullWidth:!0,label:"New Password",name:"newPassword",onChange:y,style:{marginTop:"1rem"},type:"password",value:m.newPassword,variant:"outlined"}),r.a.createElement(b.a,{fullWidth:!0,label:"Confirm password",name:"confirm",onChange:y,style:{marginTop:"1rem"},type:"password",value:m.confirm,variant:"outlined"})),r.a.createElement(I.a,null),r.a.createElement(L.a,null,r.a.createElement(v.a,{color:"primary",variant:"outlined",className:l.button,onClick:function(e){if(m.oldPassword&&m.newPassword&&m.confirm)if(m.newPassword!==m.confirm)f({message:"New password entered doesn't match.",severity:"error"});else{var a={id:i._id,oldPassword:m.oldPassword,newPassword:m.newPassword};d.updateUserPassword(a).then(function(e){e.data?(f({message:"Password is changed successfully",severity:"success"}),u({oldPassword:"",newPassword:"",confirm:""})):f({message:"Password entered is incorrect.",severity:"error"})})}else f({message:"Inputs shouldn't be blank.",severity:"error"})}},"Update")),r.a.createElement(O.a,{variant:"outlined",severity:E.severity,style:{opacity:E.message?1:0},onClose:function(){return f({})}},E.message))))))}var J=t(105),X=t(599),Q=t(101),ee=t.n(Q),ae=t(19);t(366);var te=function(e){var a=Object(n.useState)(),t=Object(c.a)(a,2),l=t[0],i=t[1];Object(n.useEffect)(function(){navigator.geolocation.getCurrentPosition(function(e){i({latitude:e.coords.latitude,longitude:e.coords.longitude})})},[]);var o=["Beyond Repair","Close Support","Depot","General Support","Integral","Unknown"],s=["Drivable","Straight Pull","Suspended Tow"],m=["Safe","Hostile"],u=Object(w.a)({typography:{marginBottom:15},formGroup:{marginBottom:15},errorMessage:{color:"red"}})(),p=r.a.useState(!1),E=Object(c.a)(p,2),y=E[0],k=E[1],R=ae.b().shape({description:ae.c().min(2,"Minimum 2 letters").max(30,"Maximum 30 letters").required("Required"),estimatedConditionClass:ae.c().required("Required"),vehicleCanBeMovedBy:ae.c().required("Required"),localTacticalSituation:ae.c().required("Required"),crewRemainedWithVehicle:ae.a().required("Required")});return r.a.createElement(h.a,{maxWidth:"sm"},r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(g.a,{variant:"h4",className:u.typography},"Create Repair Request"),!1===e.user.mounted?r.a.createElement(g.a,{variant:"h6",className:u.typography,style:{marginBottom:0}},"You're currently dismounted. To create a Repair Request, your Operations Manager must first assign you to a vehicle."):r.a.createElement(N.d,{initialValues:{description:"",estimatedConditionClass:"",vehicleCanBeMovedBy:"",localTacticalSituation:"",crewRemainedWithVehicle:""},validationSchema:R,onSubmit:function(a,t){var n=t.resetForm,r={description:a.description,estimatedConditionClass:a.estimatedConditionClass,vehicleCanBeMovedBy:a.vehicleCanBeMovedBy,localTacticalSituation:a.localTacticalSituation,crewRemainedWithVehicle:a.crewRemainedWithVehicle,location:l};d.saveRepairRequest(r).then(function(a){var t=[];e.vehicle.repairRequests&&(t=e.vehicle.repairRequests.map(function(e){return e._id})),d.updateVehicleRepairRequests(e.vehicle._id,[].concat(Object(J.a)(t),[a.data._id]))}).then(function(){return d.updateVehicleServiceableStatus(e.vehicle._id,!1)}),k(!0),setTimeout(function(){return k(!1)},1500),n()}},function(e){var a=e.errors,t=e.touched;return e.values,r.a.createElement(N.c,null,r.a.createElement(f.a,{className:u.formGroup},r.a.createElement(N.b,{name:"description",as:b.a,label:"Description"}),a.description&&t.description?r.a.createElement("span",{className:u.errorMessage},r.a.createElement(N.a,{name:"description"})):null),r.a.createElement(f.a,{className:u.formGroup},r.a.createElement(N.b,{name:"estimatedConditionClass",as:b.a,select:!0,label:"Estimated Condition Class"},o.map(function(e){return r.a.createElement(X.a,{key:e,value:e},e)})),a.estimatedConditionClass&&t.estimatedConditionClass?r.a.createElement("span",{className:u.errorMessage},r.a.createElement(N.a,{name:"estimatedConditionClass"})):null),r.a.createElement(f.a,{className:u.formGroup},r.a.createElement(N.b,{name:"vehicleCanBeMovedBy",as:b.a,select:!0,label:"Vehicle Can Be Moved By"},s.map(function(e){return r.a.createElement(X.a,{key:e,value:e},e)})),a.vehicleCanBeMovedBy&&t.vehicleCanBeMovedBy?r.a.createElement("span",{className:u.errorMessage},r.a.createElement(N.a,{name:"vehicleCanBeMovedBy"})):null),r.a.createElement(f.a,{className:u.formGroup},r.a.createElement(N.b,{name:"localTacticalSituation",as:b.a,select:!0,label:"Local Tactical Situation"},m.map(function(e){return r.a.createElement(X.a,{key:e,value:e},e)})),a.localTacticalSituation&&t.localTacticalSituation?r.a.createElement("span",{className:u.errorMessage},r.a.createElement(N.a,{name:"localTacticalSituation"})):null),r.a.createElement(f.a,{className:u.formGroup},r.a.createElement(N.b,{name:"crewRemainedWithVehicle",as:b.a,select:!0,label:"Crew Remained With Vehicle"},r.a.createElement(X.a,{key:"Yes",value:!0},"Yes"),r.a.createElement(X.a,{key:"No",value:!1},"No")),a.crewRemainedWithVehicle&&t.crewRemainedWithVehicle?r.a.createElement("span",{className:u.errorMessage},r.a.createElement(N.a,{name:"crewRemainedWithVehicle"})):null),r.a.createElement(v.a,{type:"submit"},"Create"))}))),y&&r.a.createElement(O.a,{icon:r.a.createElement(ee.a,{fontSize:"inherit"}),variant:"filled",severity:"success",hidden:!0,style:{marginTop:20}},"Repair Request created"))};var ne=function(){var e=Object(n.useState)([]),a=Object(c.a)(e,2),t=a[0],l=a[1],i=Object(n.useContext)(x);return Object(n.useEffect)(function(){d.getVehicles().then(function(e){var a=e.data.find(function(e){return e.occupant&&e.occupant._id===i._id});l(a)})}),r.a.createElement(te,{user:i,vehicle:t})},re=t(273),le=t.n(re),ie=t(602),ce=t(603),oe=t(590),se=t(614),me=t(276),ue=t.n(me),pe=t(279),de=t.n(pe),ge=t(277),he=t.n(ge),Ee=t(601),fe=t(274),be=t.n(fe),ve=t(197),ye=t.n(ve),we=t(196),Oe=t.n(we),Ne=t(275),ke=t.n(Ne),Re=t(51),Ce=t.n(Re),Te=t(600),Se=(t(367),r.a.createElement("div",null,r.a.createElement(Te.a,{to:"/create-user"},r.a.createElement(D.a,{button:!0},r.a.createElement(Ee.a,null,r.a.createElement(Oe.a,null)),r.a.createElement(G.a,{primary:"Create Operator"}))),r.a.createElement(Te.a,{to:"/create-vehicle"},r.a.createElement(D.a,{button:!0},r.a.createElement(Ee.a,null,r.a.createElement(ye.a,null)),r.a.createElement(G.a,{primary:"Create Operator Vehicle"}))),r.a.createElement(Te.a,{to:"/display-users"},r.a.createElement(D.a,{button:!0},r.a.createElement(Ee.a,null,r.a.createElement(Ce.a,null)),r.a.createElement(G.a,{primary:"Display Operators"}))),r.a.createElement(Te.a,{to:"/display-vehicles"},r.a.createElement(D.a,{button:!0},r.a.createElement(Ee.a,null,r.a.createElement(Ce.a,null)),r.a.createElement(G.a,{primary:"Display Operator Vehicles"}))))),Me=r.a.createElement("div",null,r.a.createElement(Te.a,{to:"/create-user"},r.a.createElement(D.a,{button:!0},r.a.createElement(Ee.a,null,r.a.createElement(Oe.a,null)),r.a.createElement(G.a,{primary:"Create Technician"}))),r.a.createElement(Te.a,{to:"/create-vehicle"},r.a.createElement(D.a,{button:!0},r.a.createElement(Ee.a,null,r.a.createElement(ye.a,null)),r.a.createElement(G.a,{primary:"Create Technician Vehicle"}))),r.a.createElement(Te.a,{to:"/display-users"},r.a.createElement(D.a,{button:!0},r.a.createElement(Ee.a,null,r.a.createElement(Ce.a,null)),r.a.createElement(G.a,{primary:"Display Technicians"}))),r.a.createElement(Te.a,{to:"/display-vehicles"},r.a.createElement(D.a,{button:!0},r.a.createElement(Ee.a,null,r.a.createElement(Ce.a,null)),r.a.createElement(G.a,{primary:"Display Technician Vehicles"}))),r.a.createElement(Te.a,{to:"/display-repairRequests"},r.a.createElement(D.a,{button:!0},r.a.createElement(Ee.a,null,r.a.createElement(Ce.a,null)),r.a.createElement(G.a,{primary:"Display Repair Requests"}))),r.a.createElement(Te.a,{to:"/display-repairWorkorders"},r.a.createElement(D.a,{button:!0},r.a.createElement(Ee.a,null,r.a.createElement(Ce.a,null)),r.a.createElement(G.a,{primary:"Display Repair Work Orders"}))),r.a.createElement(Te.a,{to:"/dashboard"},r.a.createElement(D.a,{button:!0},r.a.createElement(Ee.a,null,r.a.createElement(be.a,null)),r.a.createElement(G.a,{primary:"Display Dashboard"})))),qe=r.a.createElement("div",null,r.a.createElement(Te.a,{to:"/create-repair-request"},r.a.createElement(D.a,{button:!0},r.a.createElement(Ee.a,null,r.a.createElement(ke.a,null)),r.a.createElement(G.a,{primary:"Create Repair Request"}))),r.a.createElement(Te.a,{to:"/display-repairRequests"},r.a.createElement(D.a,{button:!0},r.a.createElement(Ee.a,null,r.a.createElement(Ce.a,null)),r.a.createElement(G.a,{primary:"Display Repair Requests"})))),xe=r.a.createElement("div",null,r.a.createElement(Te.a,{to:"/display-repairRequests"},r.a.createElement(D.a,{button:!0},r.a.createElement(Ee.a,null,r.a.createElement(Ce.a,null)),r.a.createElement(G.a,{primary:"Display Repair Requests"}))),r.a.createElement(Te.a,{to:"/display-repairWorkorders"},r.a.createElement(D.a,{button:!0},r.a.createElement(Ee.a,null,r.a.createElement(Ce.a,null)),r.a.createElement(G.a,{primary:"Display Repair Work Orders"})))),je=t(278),Ve=t.n(je);function Be(e){var a=Object(w.a)(function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(M.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:300,width:"calc(100% - ".concat(300,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:300,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(S.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}})(),t=r.a.useState(!0),l=Object(c.a)(t,2),i=l[0],o=l[1],s=Object(n.useContext)(x).role,m=Se;switch(s){case"Technician":m=xe;break;case"Operator":m=qe;break;case"Operations Manager":m=Se;break;case"Maintenance Manager":m=Me}return r.a.createElement("div",{className:a.root},r.a.createElement(E.a,null),r.a.createElement(ie.a,{position:"absolute",className:Object(j.a)(a.appBar,i&&a.appBarShift)},r.a.createElement(ce.a,{className:a.toolbar},r.a.createElement(oe.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){o(!0)},className:Object(j.a)(a.menuButton,i&&a.menuButtonHidden)},r.a.createElement(ue.a,null)),r.a.createElement(g.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:a.title},"eTripleR"),r.a.createElement(oe.a,{color:"inherit",onClick:function(){window.location.href="/profile"}},r.a.createElement(he.a,null)),r.a.createElement(oe.a,{className:a.signOutButton,color:"inherit",onClick:function(){d.logout().then(function(){return window.location.href="/"})}},r.a.createElement(Ve.a,null)))),r.a.createElement(se.a,{variant:"permanent",classes:{paper:Object(j.a)(a.drawerPaper,!i&&a.drawerPaperClose)},open:i},r.a.createElement("div",{className:a.toolbarIcon},r.a.createElement(oe.a,{onClick:function(){o(!1)}},r.a.createElement(de.a,null))),r.a.createElement(I.a,null),r.a.createElement(P.a,null,m)),r.a.createElement("main",{className:a.content},r.a.createElement("div",{className:a.appBarSpacer}),r.a.createElement(h.a,{maxWidth:"lg",className:a.container},e.children)))}var We=t(616),Ie=t(280),Pe=t.n(Ie),De=Object(w.a)(function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}});function Ae(){var e=De();return r.a.createElement(h.a,{component:"main",maxWidth:"xs"},r.a.createElement(E.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(We.a,{className:e.avatar},r.a.createElement(Pe.a,null)),r.a.createElement(g.a,{component:"h1",variant:"h5"},"You are not allowed to see this page!"),r.a.createElement("form",{className:e.form,noValidate:!0})),r.a.createElement(y.a,{mt:8}))}var Ge=Object(w.a)(function(e){return{heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)}}});function _e(){var e=Ge(),a=Object(n.useContext)(x);return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null),r.a.createElement("div",{className:e.heroContent},r.a.createElement(h.a,{maxWidth:"lg"},r.a.createElement(g.a,{component:"h1",variant:"h2",align:"center",color:"textPrimary",gutterBottom:!0},"Welcome to eTripleR"),r.a.createElement(g.a,{component:"h1",variant:"h4",align:"center",color:"textPrimary",gutterBottom:!0},"Your tactical maintenance management solution"),r.a.createElement(g.a,{variant:"h5",align:"center",color:"textSecondary",paragraph:!0},"You're currently logged in as ",a.rank," ",a.firstName," ",a.lastName," with role"," ",a.role,"."))))}t(368);var Le=t(297),Ue=t(20);function ze(e){return r.a.createElement(g.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},e.children)}function Fe(){var e=Object(n.useState)([]),a=Object(c.a)(e,2),t=a[0],l=a[1];return Object(n.useEffect)(function(){d.getRepairRequests().then(function(e){var a=[{name:"unAssigned",requests:0}],t=["unAssigned"],n="";e.data.forEach(function(e){n=e.assignedTo?"".concat(e.assignedTo.firstName," ").concat(e.assignedTo.lastName):"unAssigned",t.includes(n)?a=a.map(function(e){return e.name===n&&(e.requests+=1),e}):(a.push({name:n,requests:1}),t.push(n))}),l(a)})},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ze,null,"Requests by Technician"),r.a.createElement(Ue.h,null,r.a.createElement(Ue.b,{width:250,height:200,data:t},r.a.createElement(Ue.c,{strokeDasharray:"3 3"}),r.a.createElement(Ue.j,{dataKey:"name"}),r.a.createElement(Ue.k,null),r.a.createElement(Ue.i,null),r.a.createElement(Ue.e,null),r.a.createElement(Ue.a,{dataKey:"requests",fill:"blue"}))))}function He(){var e=Object(n.useState)([]),a=Object(c.a)(e,2),t=a[0],l=a[1];return Object(n.useEffect)(function(){d.getRepairRequests().then(function(e){var a=[{Name:"Local Tactical Situation",Hostile:0,Safe:0}];e.data.forEach(function(e){"Hostile"===e.localTacticalSituation?a[0].Hostile+=1:a[0].Safe+=1}),l(a)})},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ze,null,"Requests by Local Tactical Situation"),r.a.createElement(Ue.h,null,r.a.createElement(Ue.b,{width:250,height:200,data:t},r.a.createElement(Ue.c,{strokeDasharray:"3 3"}),r.a.createElement(Ue.j,{dataKey:"name"}),r.a.createElement(Ue.k,null),r.a.createElement(Ue.i,null),r.a.createElement(Ue.e,null),r.a.createElement(Ue.a,{dataKey:"Hostile",fill:"red"}),r.a.createElement(Ue.a,{dataKey:"Safe",fill:"green"}))))}var Ye=["red","khaki","green"],$e=Math.PI/180,Ze=function(e){var a=e.cx,t=e.cy,n=e.midAngle,l=e.innerRadius,i=e.outerRadius,c=e.percent,o=l+.5*(i-l),s=a+o*Math.cos(-n*$e),m=t+o*Math.sin(-n*$e);return r.a.createElement("text",{x:s,y:m,fill:"black",textAnchor:s>a?"start":"end",dominantBaseline:"central"},"".concat((100*c).toFixed(0),"%"))};function Ke(){var e=Object(n.useState)([]),a=Object(c.a)(e,2),t=a[0],l=a[1];return Object(n.useEffect)(function(){d.getRepairRequests().then(function(e){var a=0,t=0,n=0;e.data.forEach(function(e){"Open"===e.status?a+=1:"Work In Progress"===e.status?t+=1:n+=1}),l([{name:"Open",value:a},{name:"Progress",value:t},{name:"Done",value:n}])})},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ze,null,"Requests By Status"),r.a.createElement(Ue.h,null,r.a.createElement(Ue.g,{width:200,height:200},r.a.createElement(Ue.f,{data:t,labelLine:!1,label:Ze,outerRadius:80,fill:"#8884d8",dataKey:"value"},t.map(function(e,a){return r.a.createElement(Ue.d,{key:"cell-".concat(a),fill:Ye[a%Ye.length]})})))))}var Je=t(293),Xe=function(){var e=Object(n.useRef)(),a=Object(n.useState)([]),t=Object(c.a)(a,2),l=t[0],i=t[1];return Object(n.useEffect)(function(){d.getVehicles().then(function(e){i(e.data)})},[]),Object(n.useEffect)(function(){Object(Je.loadModules)(["esri/Map","esri/views/MapView","esri/Graphic","esri/layers/GraphicsLayer","esri/widgets/BasemapToggle","esri/widgets/CoordinateConversion","esri/widgets/Legend"],{css:!0}).then(function(a){var t=Object(c.a)(a,7),n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],m=t[5],u=(t[6],new n({basemap:"hybrid"})),p=new r({container:e.current,map:u,center:[-75.54,45.45],zoom:11}),d=[];l.forEach(function(e){if("Maintenance Manager"===e.role&&void 0!==e.location){var a=e.registrationNumber,t=e.callSign,n="".concat(e.occupant.firstName," ").concat(e.occupant.lastName),r=e.occupant.rank,l=e.type,c={type:"point",longitude:e.location.longitude,latitude:e.location.latitude},o=new i({geometry:c,symbol:{type:"simple-marker",color:"orange",size:"15px",style:"square"}});o.popupTemplate={title:"Maintenance Manager Location",content:"<ul><li>Vehicle Registration Number: ".concat(a,"</li>")+"<li>Vehicle CallSign: ".concat(t,"</li>")+"<li>Manager Name: ".concat(n,"</li>")+"<li>Manager Rank: ".concat(r,"</li>")+"<li>Vehicle Type: ".concat(l,"</li><ul>")},d.push(o)}if(0!==e.repairRequests){var s=e.callSign,m=e.registrationNumber,u="",p="",g="";e.occupant&&(u="".concat(e.occupant.firstName," ").concat(e.occupant.lastName),p=e.occupant.occupation,g=e.occupant.rank),e.repairRequests.forEach(function(e){var a={type:"point",longitude:e.location.longitude,latitude:e.location.latitude},t="green";"Work In Progress"===e.status?t="yellow":"Open"===e.status&&(t="red");var n={type:"simple-marker",color:t,size:"15px"};"Safe"===e.localTacticalSituation?n.style="circle":n.style="triangle";var r=new i({geometry:a,symbol:n});r.popupTemplate={title:"Repair Request Details",content:"<ul><li>Vehicle Registration Number: ".concat(m,"</li>")+"<li>Vehicle CallSign: ".concat(s,"</li>")+"<li>Operator Name: ".concat(u,"</li>")+"<li>Operator Occupation: ".concat(p,"</li>")+"<li>Operator Rank: ".concat(g,"</li>")+"<li>Estimated Condition Class: ".concat(e.estimatedConditionClass,"</li>")+"<li>Can Be Moved By: ".concat(e.vehicleCanBeMovedBy,"</li>")+"<li>Local Tactical Situation: ".concat(e.localTacticalSituation,"</li>")+"<li>Crew Remained With Vehicle: ".concat(e.crewRemainedWithVehicle,"</li><ul>")},d.push(r)})}});var g=new o({graphics:d});u.add(g);var h=new s({view:p,nextBasemap:"topo-vector"});p.ui.add(h,"top-left");var E=new m({view:p});return p.ui.add(E,"bottom-left"),function(){p&&(p.container=null)}})}),r.a.createElement("div",{className:"webmap",ref:e,style:{height:"100%",width:"100%"}})},Qe=t(604),ea=t(605),aa=t(606),ta=t(607),na=t(608),ra=t(609),la=Object(w.a)({table:{width:250}});function ia(e,a,t,n,r){return{name:e,calories:a,fat:t,carbs:n,protein:r}}var ca=[ia("Request Open",r.a.createElement("div",{style:{height:"25px",width:"50px",backgroundColor:"red"}})),ia("Request In Progress",r.a.createElement("div",{style:{height:"25px",width:"50px",backgroundColor:"khaki"}})),ia("Request Finished",r.a.createElement("div",{style:{height:"25px",width:"50px",backgroundColor:"green"}})),ia("Manager Location",r.a.createElement("div",{style:{height:"25px",width:"25px",backgroundColor:"orange"}})),ia("Situation: Safe",r.a.createElement("div",{style:{height:"25px",width:"25px",backgroundColor:"#555",borderRadius:"50px"}})),ia("Situation: Hostile",r.a.createElement("div",{style:{height:"0",width:"0",borderLeft:"13px solid transparent",borderRight:"13px solid transparent",borderBottom:"26px solid #555"}}))];function oa(){var e=la();return r.a.createElement(Qe.a,null,r.a.createElement(ea.a,{className:e.table,size:"small","aria-label":"a dense table"},r.a.createElement(aa.a,null,r.a.createElement(ta.a,null,r.a.createElement(na.a,{style:{fontWeight:800}},"Requests Status"),r.a.createElement(na.a,{align:"right",style:{fontWeight:800}},"Color"))),r.a.createElement(ra.a,null,ca.map(function(e){return r.a.createElement(ta.a,{key:e.name},r.a.createElement(na.a,{component:"th",scope:"row"},e.name),r.a.createElement(na.a,{align:"right"},e.calories))}))))}var sa=Object(w.a)(function(e){return{appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:250}}});function ma(){var e=sa(),a=Object(j.a)(e.paper,e.fixedHeight);return r.a.createElement(V.a,{container:!0,spacing:3},r.a.createElement(V.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(Le.a,{className:a},r.a.createElement(He,null))),r.a.createElement(V.a,{item:!0,xs:12,md:5,lg:6},r.a.createElement(Le.a,{className:a},r.a.createElement(Fe,null))),r.a.createElement(V.a,{item:!0,xs:12,md:3,lg:3},r.a.createElement(Le.a,{className:a},r.a.createElement(Ke,null))),r.a.createElement(V.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(Le.a,{style:{height:"500px"}},r.a.createElement(oa,null))),r.a.createElement(V.a,{item:!0,xs:12,md:8,lg:9,style:{height:"500px"}},r.a.createElement(Xe,null)))}t(543);var ua=t(169);var pa,da,ga,ha,Ea=function(e){var a=Object(w.a)({typography:{marginBottom:15},formGroup:{marginBottom:15},errorMessage:{color:"red"}})(),t=r.a.useState(!1),n=Object(c.a)(t,2),l=n[0],i=n[1],o=ae.b().shape({rank:ae.c().required("Required"),firstName:ae.c().matches("^[a-zA-Z][a-zA-Z-. ]*$","Must begin with a letter, and can only contain letters and spaces, - and .").min(2,"Minimum 2 letters").max(30,"Maximum 30 letters").required("Required"),lastName:ae.c().matches("^[a-zA-Z][a-zA-Z-. ]*$","Must begin with a letter, and can only contain letters and spaces, - and .").min(2,"Minimum 2 letters").max(30,"Maximum 30 letters").required("Required"),occupation:ae.c().required("Required"),username:ae.c().matches("^[a-zA-Z][a-zA-Z0-9]*$","Must begin with a letter, and can only contain letters and numbers").min(6,"Minimum 6 characters").max(20,"Maximum 20 characters").required("Required"),password:ae.c().matches("^[a-zA-Z0-9!@#%$&]*$","Can only contain letters, numbers, !, @, #, $, % and &").min(8,"Minimum 8 characters").max(20,"Maximum 20 characters").required("Required")});return r.a.createElement(h.a,{maxWidth:"sm"},r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(g.a,{variant:"h4",className:a.typography},e.formTitle),r.a.createElement(N.d,{initialValues:{role:e.role,rank:"",firstName:"",lastName:"",occupation:"",username:"",password:""},validationSchema:o,onSubmit:function(a,t){var n=t.resetForm,r={role:e.role,rank:a.rank,firstName:ua.title(a.firstName).trim(),lastName:ua.title(a.lastName).trim(),occupation:a.occupation,username:ua.lower(a.username),password:a.password};d.saveUser(r),i(!0),setTimeout(function(){return i(!1)},1500),n()}},function(t){var n=t.errors,l=t.touched;return t.values,r.a.createElement(N.c,null,r.a.createElement(f.a,{className:a.formGroup},r.a.createElement(N.b,{name:"rank",as:b.a,select:!0,label:"Rank"},e.ranks.map(function(e){return r.a.createElement(X.a,{key:e,value:e},e)})),n.rank&&l.rank?r.a.createElement("span",{className:a.errorMessage},r.a.createElement(N.a,{name:"rank"})):null),r.a.createElement(f.a,{className:a.formGroup},r.a.createElement(N.b,{name:"firstName",as:b.a,label:"First Name"}),n.firstName&&l.firstName?r.a.createElement("span",{className:a.errorMessage},r.a.createElement(N.a,{name:"firstName"})):null),r.a.createElement(f.a,{className:a.formGroup},r.a.createElement(N.b,{name:"lastName",as:b.a,label:"Last Name"}),n.lastName&&l.lastName?r.a.createElement("span",{className:a.errorMessage},r.a.createElement(N.a,{name:"lastName"})):null),r.a.createElement(f.a,{className:a.formGroup},r.a.createElement(N.b,{name:"occupation",as:b.a,select:!0,label:"Occupation"},e.occupations.map(function(e){return r.a.createElement(X.a,{key:e,value:e},e)})),n.occupation&&l.occupation?r.a.createElement("span",{className:a.errorMessage},r.a.createElement(N.a,{name:"occupation"})):null),r.a.createElement(f.a,{className:a.formGroup},r.a.createElement(N.b,{name:"username",as:b.a,label:"Username"}),n.username&&l.username?r.a.createElement("span",{className:a.errorMessage},r.a.createElement(N.a,{name:"username"})):null),r.a.createElement(f.a,{className:a.formGroup},r.a.createElement(N.b,{name:"password",as:b.a,label:"Password"}),n.password&&l.password?r.a.createElement("span",{className:a.errorMessage},r.a.createElement(N.a,{name:"password"})):null),r.a.createElement(v.a,{type:"submit"},"Create"))}))),l&&r.a.createElement(O.a,{icon:r.a.createElement(ee.a,{fontSize:"inherit"}),variant:"filled",severity:"success",hidden:!0,style:{marginTop:20}},e.role," created"))},fa=["Private","Corporal","Master Corporal","Sergeant"],ba=["Craftsman","Corporal","Master Corporal","Sergeant"],va=["Armoured Soldier","Combat Engineer","Gunner","Infantry Soldier","Military Policy Officer","Mobile Support Equipment Operator","Supply Technician"],ya=["Electronic-Optronic Technician","Materials Technician","Vehicle Technician","Weapons Technician"],wa=function(e){switch(e){case"Operations Manager":pa="Create Operator",da="Operator",ga=fa,ha=va;break;default:pa="Create Technician",da="Technician",ga=ba,ha=ya}};var Oa=function(){var e=Object(n.useContext)(x);return wa(e.role),r.a.createElement(Ea,{formTitle:pa,role:da,ranks:ga,occupations:ha})},Na=(t(544),t(169));var ka,Ra,Ca,Ta=function(e){var a=Object(w.a)({typography:{marginBottom:15},formGroup:{marginBottom:15},errorMessage:{color:"red"}})(),t=r.a.useState(!1),n=Object(c.a)(t,2),l=n[0],i=n[1],o=ae.b().shape({type:ae.c().required("Required"),registrationNumber:ae.c().matches("^[0-9]*$","Can only contain numbers").min(5,"Must be 5 characters").max(5,"Must be 5 characters").required("Required"),callSign:ae.c().matches("^[a-zA-Z0-9]*$","Can only contain letters and numbers").min(1,"Minimum 1 character").max(4,"Maximum 4 characters").required("Required")});return r.a.createElement(h.a,{maxWidth:"sm"},r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(g.a,{variant:"h4",className:a.typography},e.formTitle),r.a.createElement(N.d,{initialValues:{role:e.role,type:"",registrationNumber:"",callSign:""},validationSchema:o,onSubmit:function(a,t){var n=t.resetForm,r=e.vehicles.find(function(e){return e.type===a.type}),l={role:a.role,type:a.type,registrationNumber:a.registrationNumber,callSign:Na.upper(a.callSign),iconSrc:r.icon};d.saveVehicle(l),i(!0),setTimeout(function(){return i(!1)},1500),n()}},function(t){var n=t.errors,l=t.touched;return t.values,r.a.createElement(N.c,null,r.a.createElement(f.a,{className:a.formGroup},r.a.createElement(N.b,{name:"type",as:b.a,select:!0,label:"Type"},e.vehicles.map(function(e){return r.a.createElement(X.a,{key:e.type,value:e.type},e.type)})),n.type&&l.type?r.a.createElement("span",{className:a.errorMessage},r.a.createElement(N.a,{name:"type"})):null),r.a.createElement(f.a,{className:a.formGroup},r.a.createElement(N.b,{name:"registrationNumber",as:b.a,label:"Registration Number"}),n.registrationNumber&&l.registrationNumber?r.a.createElement("span",{className:a.errorMessage},r.a.createElement(N.a,{name:"registrationNumber"})):null),r.a.createElement(f.a,{className:a.formGroup},r.a.createElement(N.b,{name:"callSign",as:b.a,label:"Call Sign"}),n.callSign&&l.callSign?r.a.createElement("span",{className:a.errorMessage},r.a.createElement(N.a,{name:"callSign"})):null),r.a.createElement(v.a,{type:"submit"},"Create"))}))),l&&r.a.createElement(O.a,{icon:r.a.createElement(ee.a,{fontSize:"inherit"}),variant:"filled",severity:"success",hidden:!0,style:{marginTop:20}},e.role," vehicle created"))},Sa=[{type:"Armoured Engineering Vehicle",icon:"assets/images/vehicleIcons/armoured-engineering-vehicle.png"},{type:"Armoured Patrol Vehicle",icon:"assets/images/vehicleIcons/armoured-patrol-vehicle.png"},{type:"Heavy Logistic Vehicle, Refueller",icon:"assets/images/vehicleIcons/heavy-logistic-vehicle-refueller.png"},{type:"Heavy Logistic Vehicle, Tank Transporter",icon:"assets/images/vehicleIcons/heavy-logistic-vehicle-tank-transporter.png"},{type:"Infantry Fighting Vehicle",icon:"assets/images/vehicleIcons/infantry-fighting-vehicle.png"},{type:"Main Battle Tank",icon:"assets/images/vehicleIcons/main-battle-tank.png"},{type:"Medium Logistic Vehicle, Cargo",icon:"assets/images/vehicleIcons/medium-logistic-vehicle-cargo.png"},{type:"Medium Logistic Vehicle, Gun Tractor",icon:"assets/images/vehicleIcons/medium-logistic-vehicle-gun-tractor.png"}],Ma=[{type:"Armoured Recovery Vehicle",icon:"assets/images/vehicleIcons/armoured-recovery-vehicle.png"},{type:"Medium Logistic Vehicle, Mobile Repair Team",icon:"assets/images/vehicleIcons/medium-logistic-vehicle-mobile-repair-team.png"}],qa=function(e){switch(e){case"Operations Manager":ka="Create Operator Vehicle",Ra="Operator",Ca=Sa;break;default:ka="Create Technician Vehicle",Ra="Technician",Ca=Ma}};var xa=function(){var e=Object(n.useContext)(x);return qa(e.role),r.a.createElement(Ta,{formTitle:ka,role:Ra,vehicles:Ca})},ja=t(617),Va=Object(w.a)({table:{minWidth:650},typography:{marginBottom:15}});function Ba(e){switch(e.rank){case"Private":return"assets/images/rankIcons/army-private.png";case"Craftsman":return"assets/images/rankIcons/army-craftsman.png";case"Corporal":return"assets/images/rankIcons/army-corporal.png";case"Master Corporal":return"assets/images/rankIcons/army-master-corporal.png";case"Sergeant":return"assets/images/rankIcons/army-sergeant.png";case"Warrant Officer":return"assets/images/rankIcons/army-warrant-officer.png";case"Master Warrant Officer":return"assets/images/rankIcons/army-master-warrant-officer.png";case"2nd Lieutenant":return"assets/images/rankIcons/army-2nd-lieutenant.png";case"Lieutenant":return"assets/images/rankIcons/army-lieutenant.png";case"Captain":return"assets/images/rankIcons/army-captain.png";case"Major":return"assets/images/rankIcons/army-major.png"}}var Wa,Ia=function(e){var a=Va();return r.a.createElement(h.a,{maxWidth:"lg"},r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(g.a,{variant:"h4",className:a.typography},e.pageTitle),r.a.createElement(Qe.a,null,r.a.createElement(ea.a,{className:a.table,"aria-label":"simple table"},r.a.createElement(aa.a,null,r.a.createElement(ta.a,null,r.a.createElement(na.a,null,"Icon"),r.a.createElement(na.a,{align:"right"},"Rank"),r.a.createElement(na.a,{align:"right"},"First Name"),r.a.createElement(na.a,{align:"right"},"Last Name"),r.a.createElement(na.a,{align:"right"},"Occupation"),r.a.createElement(na.a,{align:"right"},"Available"),r.a.createElement(na.a,{align:"right"},"Mounted"))),r.a.createElement(ra.a,null,e.users.map(function(e){return r.a.createElement(ta.a,{key:e._id},r.a.createElement(na.a,{component:"th",scope:"row"},r.a.createElement("img",{src:Ba(e),alt:e.rank,height:"100"})),r.a.createElement(na.a,{align:"right"},e.rank),r.a.createElement(na.a,{align:"right"},e.firstName),r.a.createElement(na.a,{align:"right"},e.lastName),r.a.createElement(na.a,{align:"right"},e.occupation),r.a.createElement(na.a,{align:"right"},e.available?r.a.createElement(ja.a,{label:"Yes",style:{color:"white",backgroundColor:"green"}}):r.a.createElement(ja.a,{label:"No",style:{color:"white",backgroundColor:"red"}})),r.a.createElement(na.a,{align:"right"},e.mounted?r.a.createElement(ja.a,{label:"Yes",style:{color:"white",backgroundColor:"green"}}):r.a.createElement(ja.a,{label:"No",style:{color:"white",backgroundColor:"red"}})))})))))))},Pa=function(e){switch(e){case"Operations Manager":Wa="Display Operators";break;default:Wa="Display Technicians"}};var Da=function(){var e=Object(n.useState)([]),a=Object(c.a)(e,2),t=a[0],l=a[1],i=Object(n.useContext)(x);return Pa(i.role),Object(n.useEffect)(function(){"Operations Manager"===i.role?d.getOperators().then(function(e){l(e.data)}):"Maintenance Manager"===i.role&&d.getTechnicians().then(function(e){l(e.data)})},[]),r.a.createElement(Ia,{users:t,pageTitle:Wa})};var Aa=function(e){var a=Object(w.a)({avatar:{backgroundColor:e.backgroundColor,height:100,width:100},img:{width:e.imageWidth}})();return r.a.createElement(We.a,{className:a.avatar},r.a.createElement("img",{className:a.img,src:e.icon,alt:e.type}))};t(545);var Ga=function(e){var a=Object(w.a)({typography:{marginBottom:15},formGroup:{marginBottom:15},errorMessage:{color:"red"}})(),t=ae.b().shape({occupant:ae.c().required("Required")});return r.a.createElement(h.a,{maxWidth:"xs"},r.a.createElement(N.d,{initialValues:{vehicle:e.vehicle._id,occupant:""},validationSchema:t,onSubmit:function(a){d.updateVehicleOccupant(a.vehicle,a.occupant).then(function(){d.updateUserDismountedStatus(a.occupant,!0)}).then(function(){var t=e.dismountedUsers.find(function(e){return e._id===a.occupant});e.updateVehicles(a.vehicle,t)}).then(function(){e.updateDismountedUsers(a.occupant)})}},function(t){var n=t.errors,l=t.touched;return t.values,r.a.createElement(N.c,null,r.a.createElement(f.a,{className:a.formGroup},r.a.createElement(N.b,{name:"occupant",as:b.a,select:!0,label:"Assign"},e.dismountedUsers.map(function(e){return r.a.createElement(X.a,{key:e._id,value:e._id},"".concat(e.rank," ").concat(e.firstName," ").concat(e.lastName))})),n.occupant&&l.occupant?r.a.createElement("span",{className:a.errorMessage},r.a.createElement(N.a,{name:"occupant"})):null),r.a.createElement(v.a,{type:"submit"},"Assign"))}))},_a=Object(w.a)({table:{minWidth:650},typography:{marginBottom:15}});function La(e){if(e.repairRequests.length){if("Open"===e.repairRequests.slice(-1)[0].status)return"red";if("Work In Progress"===e.repairRequests.slice(-1)[0].status)return"gold"}return"green"}var Ua,za=function(e){var a=_a();return r.a.createElement(h.a,{maxWidth:"lg"},r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(g.a,{variant:"h4",className:a.typography},e.pageTitle),r.a.createElement(Qe.a,null,r.a.createElement(ea.a,{className:a.table,"aria-label":"simple table"},r.a.createElement(aa.a,null,r.a.createElement(ta.a,null,r.a.createElement(na.a,null,"Icon"),r.a.createElement(na.a,{align:"right"},"Call Sign"),r.a.createElement(na.a,{align:"right"},"Registration Number"),r.a.createElement(na.a,{align:"right"},"Type"),r.a.createElement(na.a,{align:"right"},"Occupant"),r.a.createElement(na.a,{align:"right"},"Serviceable"))),r.a.createElement(ra.a,null,e.vehicles.map(function(a){return r.a.createElement(ta.a,{key:a._id},r.a.createElement(na.a,{component:"th",scope:"row"},r.a.createElement(Aa,{icon:a.iconSrc,alt:a.type,backgroundColor:La(a),imageWidth:80})),r.a.createElement(na.a,{align:"right"},a.callSign),r.a.createElement(na.a,{align:"right"},a.registrationNumber),r.a.createElement(na.a,{align:"right"},a.type),r.a.createElement(na.a,{align:"right"},a.occupant?"".concat(a.occupant.rank," ").concat(a.occupant.firstName," ").concat(a.occupant.lastName):r.a.createElement(Ga,{dismountedUsers:e.dismountedUsers,vehicle:a,updateVehicles:e.updateVehicles,updateDismountedUsers:e.updateDismountedUsers})),r.a.createElement(na.a,{align:"right"},a.serviceable?r.a.createElement(ja.a,{label:"Yes",style:{color:"white",backgroundColor:"green"}}):r.a.createElement(ja.a,{label:"No",style:{color:"white",backgroundColor:"red"}})))})))))))},Fa=function(e){switch(e){case"Operations Manager":Ua="Display Operator Vehicles";break;default:Ua="Display Technician Vehicles"}};var Ha=function(){var e=Object(n.useState)([]),a=Object(c.a)(e,2),t=a[0],l=a[1],i=Object(n.useState)([]),o=Object(c.a)(i,2),s=o[0],m=o[1],u=Object(n.useContext)(x);return Fa(u.role),Object(n.useEffect)(function(){"Operations Manager"===u.role?d.getOperatorVehicles().then(function(e){l(e.data)}).then(function(){d.getDismountedOperators().then(function(e){m(e.data)})}):"Maintenance Manager"===u.role&&d.getTechnicianVehicles().then(function(e){l(e.data)}).then(function(){d.getDismountedTechnicians().then(function(e){m(e.data)})})},[]),r.a.createElement(za,{vehicles:t,pageTitle:Ua,dismountedUsers:s,updateVehicles:function(e,a){var n=Object(J.a)(t);n.find(function(a){return a._id===e}).occupant=a,l(n)},updateDismountedUsers:function(e){var a=s.filter(function(a){return a._id!==e});m(a)}})};t(546);var Ya=function(e){var a=Object(w.a)({typography:{marginBottom:15},formGroup:{marginBottom:15},errorMessage:{color:"red"}})(),t=ae.b().shape({technician:ae.c().required("Required")});return r.a.createElement(h.a,{maxWidth:"xs"},r.a.createElement(N.d,{initialValues:{repairRequest:e.repairRequest._id,technician:""},validationSchema:t,onSubmit:function(a){d.updateRepairRequestAssignedTo(a.repairRequest,a.technician).then(function(){d.updateUserAvailableStatus(a.technician,!1)}).then(function(){e.availableTechnicians.map(function(t){t._id===a.technician&&e.updateVehicles(a.repairRequest,t,"Work In Progress")})}).then(function(){e.updateAvailableTechnicians(a.technician)}).then(function(){d.updateRepairRequestStatus(a.repairRequest,"Work In Progress")})}},function(t){var n=t.errors,l=t.touched;return t.values,r.a.createElement(N.c,null,r.a.createElement(f.a,{className:a.formGroup},r.a.createElement(N.b,{name:"technician",as:b.a,select:!0,label:"Assign"},e.availableTechnicians.map(function(e){return r.a.createElement(X.a,{key:e._id,value:e._id},"".concat(e.rank," ").concat(e.firstName," ").concat(e.lastName))})),n.technician&&l.technician?r.a.createElement("span",{className:a.errorMessage},r.a.createElement(N.a,{name:"technician"})):null),r.a.createElement(v.a,{type:"submit"},"Assign"))}))},$a=Object(w.a)({table:{minWidth:650},typography:{marginBottom:15}});var Za=function(e){var a=$a();return r.a.createElement(h.a,{maxWidth:"lg"},r.a.createElement(B.a,null,r.a.createElement(W.a,null,r.a.createElement(g.a,{variant:"h4",className:a.typography},"Display Repair Requests"),0===e.vehicles.length?r.a.createElement(g.a,{variant:"h6",className:a.typography,style:{marginBottom:0}},"No Repair Requests to display."):r.a.createElement(Qe.a,null,r.a.createElement(ea.a,{className:a.table,"aria-label":"simple table"},r.a.createElement(aa.a,null,r.a.createElement(ta.a,null,r.a.createElement(na.a,null,"Number"),r.a.createElement(na.a,{align:"right"},"Vehicle Call Sign"),r.a.createElement(na.a,{align:"right"},"Vehicle Type"),r.a.createElement(na.a,{align:"right"},"Occupant"),r.a.createElement(na.a,{align:"right"},"Description"),r.a.createElement(na.a,{align:"right"},"Estimated Condition Class"),r.a.createElement(na.a,{align:"right"},"Vehicle Can Be Moved By"),r.a.createElement(na.a,{align:"right"},"Local Tactical Situation"),r.a.createElement(na.a,{align:"right"},"Crew Remained With Vehicle"),r.a.createElement(na.a,{align:"right"},"Location"),r.a.createElement(na.a,{align:"right"},"Status"),r.a.createElement(na.a,{align:"right"},"Assigned To"),r.a.createElement(na.a,{align:"right"},"Repair Work Order"))),r.a.createElement(ra.a,null,e.vehicles.map(function(a){return a.repairRequests.map(function(t){return r.a.createElement(ta.a,{key:t._id},r.a.createElement(na.a,{component:"th",scope:"row"},t.number),r.a.createElement(na.a,{align:"right"},a.callSign),r.a.createElement(na.a,{align:"right"},a.type),r.a.createElement(na.a,{align:"right"},a.occupant.rank," ",a.occupant.firstName," ",a.occupant.lastName),r.a.createElement(na.a,{align:"right"},t.description),r.a.createElement(na.a,{align:"right"},t.estimatedConditionClass),r.a.createElement(na.a,{align:"right"},t.vehicleCanBeMovedBy),r.a.createElement(na.a,{align:"right"},"Safe"===t.localTacticalSituation?r.a.createElement(ja.a,{label:"Safe",style:{color:"white",backgroundColor:"green"}}):r.a.createElement(ja.a,{label:"Hostile",style:{color:"white",backgroundColor:"red"}})),r.a.createElement(na.a,{align:"right"},t.crewRemainedWithVehicle?r.a.createElement(ja.a,{label:"Yes",style:{color:"white",backgroundColor:"green"}}):r.a.createElement(ja.a,{label:"No",style:{color:"white",backgroundColor:"red"}})),r.a.createElement(na.a,null,t.location.latitude,","," ",t.location.longitude),r.a.createElement(na.a,{align:"right"},"Open"===t.status?r.a.createElement(ja.a,{label:"Open",style:{color:"white",backgroundColor:"red"}}):"Work In Progress"===t.status?r.a.createElement(ja.a,{label:"Work In Progress",style:{color:"black",backgroundColor:"gold"}}):r.a.createElement(ja.a,{label:"Complete",style:{color:"white",backgroundColor:"green"}})),r.a.createElement(na.a,{align:"right"},void 0===t.assignedTo&&"Operator"===e.user.role?"Technician not yet assigned":t.assignedTo?"".concat(t.assignedTo.rank," ").concat(t.assignedTo.firstName," ").concat(t.assignedTo.lastName):0===e.availableTechnicians.length?"No available Technicians":r.a.createElement(Ya,{repairRequest:t,availableTechnicians:e.availableTechnicians,updateVehicles:e.updateVehicles,updateAvailableTechnicians:e.updateAvailableTechnicians})),r.a.createElement(na.a,{align:"right"},void 0===t.repairWorkOrder?"Repair Work Order not yet created":"Open"===t.repairWorkOrder.status?r.a.createElement(ja.a,{label:"Open",style:{color:"white",backgroundColor:"red"}}):"Work In Progress"===t.repairWorkOrder.status?r.a.createElement(ja.a,{label:"Work In Progress",style:{color:"black",backgroundColor:"gold"}}):r.a.createElement(ja.a,{label:"Complete",style:{color:"white",backgroundColor:"green"}})))})})))))))};var Ka=function(){var e=Object(n.useState)([]),a=Object(c.a)(e,2),t=a[0],l=a[1],i=Object(n.useState)([]),o=Object(c.a)(i,2),s=o[0],m=o[1],u=Object(n.useContext)(x);return Object(n.useEffect)(function(){d.getVehicles().then(function(e){var a=[];"Maintenance Manager"===u.role?a=e.data.filter(function(e){return 0!==e.repairRequests.length}):"Technician"===u.role?e.data.forEach(function(e){e.repairRequests.forEach(function(t){t.assignedTo&&t.assignedTo._id===u._id&&a.push(e)})}):"Operator"===u.role&&e.data.forEach(function(e){e.occupant&&e.occupant._id===u._id&&a.push(e)}),console.log(a),l(a)}).then(function(){d.getAvailableTechnicians().then(function(e){m(e.data)})})},[]),r.a.createElement(Za,{user:u,vehicles:t,availableTechnicians:s,updateVehicles:function(e,a,n){var r=Object(J.a)(t);r.map(function(t){t.repairRequests&&t.repairRequests.map(function(t){t._id===e&&(t.assignedTo=a,t.status=n)})}),l(r)},updateAvailableTechnicians:function(e){var a=s.filter(function(a){return a._id!==e});m(a)}})};var Ja=function(){var e=Object(n.useState)({}),a=Object(c.a)(e,2),t=a[0],l=a[1];return Object(n.useEffect)(function(){d.isLoggedIn().then(function(e){e.data.user&&l(e.data.user)}).catch(function(e){throw new Error(e)})},[]),r.a.createElement(o.a,null,r.a.createElement(x.Provider,{value:t},!t._id&&r.a.createElement(T,{handleLogin:function(e){l(e)}}),t._id&&r.a.createElement(Be,null,r.a.createElement(s.a,null,r.a.createElement(m.a,{exact:!0,path:"/",component:_e}),r.a.createElement(m.a,{exact:!0,path:"/dashboard"},"Maintenance Manager"===t.role?r.a.createElement(ma,null):r.a.createElement(Ae,null)),r.a.createElement(m.a,{path:"/display-users"},"Operations Manager"===t.role||"Maintenance Manager"===t.role?r.a.createElement(Da,null):r.a.createElement(Ae,null)),r.a.createElement(m.a,{path:"/display-vehicles"},"Operations Manager"===t.role||"Maintenance Manager"===t.role?r.a.createElement(Ha,null):r.a.createElement(Ae,null)),r.a.createElement(m.a,{path:"/display-repairRequests"},"Operations Manager"!==t.role?r.a.createElement(Ka,null):r.a.createElement(Ae,null)),r.a.createElement(m.a,{path:"/display-repairWorkorders"},"Technician"===t.role||"Maintenance Manager"===t.role?r.a.createElement(r.a.Fragment,null):r.a.createElement(Ae,null)),r.a.createElement(m.a,{path:"/create-repair-request"},"Operator"===t.role?r.a.createElement(ne,null):r.a.createElement(Ae,null)),r.a.createElement(m.a,{path:"/create-repairWorkorder"},"Technician"===t.role?r.a.createElement(le.a,null):r.a.createElement(Ae,null)),r.a.createElement(m.a,{path:"/create-user"},"Operations Manager"===t.role||"Maintenance Manager"===t.role?r.a.createElement(Oa,null):r.a.createElement(Ae,null)),r.a.createElement(m.a,{path:"/create-vehicle"},"Operations Manager"===t.role||"Maintenance Manager"===t.role?r.a.createElement(xa,null):r.a.createElement(Ae,null)),r.a.createElement(m.a,{path:"/profile",component:K})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ja,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)})}},[[328,1,2]]]);
//# sourceMappingURL=main.2996be28.chunk.js.map